local Keys = {    ["ESC"] = 322, ["F1"] = 288, ["F2"] = 289, ["F3"] = 170, ["F5"] = 166, ["F6"] = 167, ["F7"] = 168, ["F8"] = 169, ["F9"] = 56, ["F10"] = 57,    ["~"] = 243, ["1"] = 157, ["2"] = 158, ["3"] = 160, ["4"] = 164, ["5"] = 165, ["6"] = 159, ["7"] = 161, ["8"] = 162, ["9"] = 163, ["-"] = 84, ["="] = 83, ["BACKSPACE"] = 177,    ["TAB"] = 37, ["Q"] = 44, ["W"] = 32, ["E"] = 38, ["R"] = 45, ["T"] = 245, ["Y"] = 246, ["U"] = 303, ["P"] = 199, ["["] = 39, ["]"] = 40, ["ENTER"] = 18,    ["CAPS"] = 137, ["A"] = 34, ["S"] = 8, ["D"] = 9, ["F"] = 23, ["G"] = 47, ["H"] = 74, ["K"] = 311, ["L"] = 182,    ["LEFTSHIFT"] = 21, ["Z"] = 20, ["X"] = 73, ["C"] = 26, ["V"] = 0, ["B"] = 29, ["N"] = 249, ["M"] = 244, [","] = 82, ["."] = 81,    ["LEFTCTRL"] = 36, ["LEFTALT"] = 19, ["SPACE"] = 22, ["RIGHTCTRL"] = 70,    ["HOME"] = 213, ["PAGEUP"] = 10, ["PAGEDOWN"] = 11, ["DELETE"] = 178,    ["LEFT"] = 174, ["RIGHT"] = 175, ["TOP"] = 27, ["DOWN"] = 173,    ["NENTER"] = 201, ["N4"] = 108, ["N5"] = 60, ["N6"] = 107, ["N+"] = 96, ["N-"] = 97, ["N7"] = 117, ["N8"] = 61, ["N9"] = 118}ESX 			    			= nil-- esx beginCitizen.CreateThread(function()    while ESX == nil do        TriggerEvent('esx:getSharedObject', function(obj) ESX = obj end)        Citizen.Wait(0)    endend)RegisterNetEvent('esx:playerLoaded')AddEventHandler('esx:playerLoaded', function(xPlayer)    PlayerData = xPlayerend)AddEventHandler('playerSpawned', function()    -- doing something while player spawning    Citizen.Wait(500) --delay    ESX.TriggerServerCallback('ons_rental_room:getLastProperty', function(propertyName)        if propertyName then            if propertyName ~= '' then                local property = GetProperty(propertyName)                local playerPed = PlayerPedId()                TriggerServerEvent('ons_rental_room:deleteLastProperty')                SetEntityCoords(playerPed, Config.Zones.x, Config.Zones.y, Config.Zones.z)            end        end    end)end)--wandi drawing textfunction DrawText3DTest(x,y,z, text,scale)    local onScreen, _x, _y = World3dToScreen2d(x, y, z)    local pX, pY, pZ = table.unpack(GetGameplayCamCoords())    if onScreen then        SetTextScale(scale, scale)        SetTextFont(4)        SetTextProportional(1)        SetTextEntry("STRING")        SetTextCentre(1)        SetTextColour(255, 255, 255, 255)        SetTextOutline()        AddTextComponentString(text)        DrawText(_x, _y)        local factor = (string.len(text)) / 270        DrawRect(_x, _y + 0.015, 0.005 + factor, 0.03, 31, 31, 31, 155)    endendCitizen.CreateThread(function()    local blip = AddBlipForCoord(Config.Zones.x, Config.Zones.y, Config.Zones.z)    SetBlipSprite (blip,374)    SetBlipDisplay(blip, 4)    SetBlipColour(blip, 3)    SetBlipScale  (blip, 0.8)    SetBlipAsShortRange(blip, true)    BeginTextCommandSetBlipName("STRING")    AddTextComponentString("Rental Room 24/7")    EndTextCommandSetBlipName(blip)end)AddEventHandler('ons_rental_room:EnterMarker', function(zone)end)local isInRoomMenu = falseAddEventHandler('ons_rental_room:ExitMarker', function(zone)    if isInRoomMenu  then        ESX.UI.Menu.CloseAll()        isInRoomMenu = false    endend)Citizen.CreateThread(function()    while true do        Citizen.Wait(500)        local coord = GetEntityCoords(GetPlayerPed(-1))        local isInmarker = false        local CurrentCenter = nil        if isInRoomMenu then            if(GetDistanceBetweenCoords(coord, Config.Zones.x , Config.Zones.y, Config.Zones.z , true) < 1.2) then                isInmarker = true                CurrentCenter = 'rental'            else                CurrentCenter = nil            end            if (CurrentCenter ~= nil and isInRoomMenu ) then                TriggerEvent('ons_rental_room:EnterMarker' , CurrentCenter)            else                TriggerEvent('ons_rental_room:ExitMarker' , CurrentCenter)            end        end    endend)Citizen.CreateThread(function()    while true do        Citizen.Wait(2)        local Ped = GetPlayerPed(-1)        local PedCoord = GetEntityCoords(Ped)        if (GetDistanceBetweenCoords(PedCoord, Config.Zones.x, Config.Zones.y, Config.Zones.z, true) <= 1.5) then            DrawText3DTest(Config.Zones.x, Config.Zones.y, Config.Zones.z, "Press ~r~[E]~w~ Rental Room menu " , 0.35)            if IsControlJustReleased(0, Keys['E']) then                OpenMenuApt(ESX.GetPlayerData().identifier)            end        end    endend)function OpenMenuApt(identifier)    isInRoomMenu = true    ESX.UI.Menu.CloseAll()    local elements = {}    ESX.TriggerServerCallback('ons_rental_room:GetOwnerShip' , function(result)        if #result > 0 then            -- room menu            table.insert(elements, {label = 'Clothes', value= 'clothes'})            table.insert(elements, {label = 'Locker', value= 'loker'})            table.insert(elements, {label = 'Remove clothes', value= 'removecloth'})            table.insert(elements, {label = 'Reset All Clothes', value= 'resetallcloth'})            ESX.UI.Menu.Open( 'default' , GetCurrentResourceName() , 'Rental',                    {                        title = 'Enter Menu',                        align = 'bottom-right',                        elements = elements,                    }, function(data, menu)                        if data.current.value == 'clothes' then                            ESX.TriggerServerCallback('ons_rental_room:getPlayerDressing', function(dressing)                                local elements = {}                                for i = 1 , #dressing , 1 do                                    table.insert(elements, {                                        label = dressing[i],                                        value = i                                    })                                end                                ESX.UI.Menu.Open('default', GetCurrentResourceName(), 'player_dressing',                                        {                                            title = 'Player Clothes',                                            align = 'bottom-right',                                            elements = elements                                        }, function (data2, menu2)                                            TriggerEvent('skinchanger:getSkin',function (skin)                                                ESX.TriggerServerCallback('ons_rental_room:getPlayerOutfit', function(clothes)                                                    TriggerEvent('skinchanger:loadClothes', skin, clothes)                                                    TriggerEvent('esx_skin:setLastSkin', skin)                                                    TriggerEvent('skinchanger:getSkin', function(skin)                                                        TriggerServerEvent('esx_skin:save', skin)                                                    end)                                                end, data2.current.value)                                            end)                                        end, function(data2, menu2)                                            menu2.close()                                        end)                            end)                        elseif data.current.value == 'loker' then                            menu.close()                            OpenPropertyInventoryMenu(identifier)                        elseif data.current.value == 'removecloth' then                            ESX.TriggerServerCallback('ons_rental_room:getPlayerDressing', function(dressing)                                local elements = {}                                for i=1, #dressing, 1 do                                    table.insert(elements, {                                        label = dressing[i],                                        value = i                                    })                                end                                ESX.UI.Menu.Open('default', GetCurrentResourceName(), 'remove_cloth', {                                    title    = 'Remove Clothes',                                    align    = 'bottom-right',                                    elements = elements                                }, function(data2, menu2)                                    menu2.close()                                    TriggerServerEvent('ons_rental_room:removeOutfit', data2.current.value)                                    ESX.ShowNotification('Clothes Removed')                                end, function(data2, menu2)                                    menu2.close()                                end)                            end)                        elseif data.current.value == 'resetallcloth' then                            ESX.UI.Menu.Open('default', GetCurrentResourceName(), 'remove_confirm',                                    {                                        title = 'Reset All Clothes',                                        align = 'bottom-right',                                        elements = {                                            {label = 'no' , value = 'no'},                                            {label = 'yes', value = 'yes'}                                        }                                    },                                    function (data2, menu2)                                        menu2.close()                                        TriggerServerEvent('ons_rental_room:removeAllClothes', data2.current.value)                                        ESX.ShowNotification('Clothes removed')                                    end, function (data2, menu2)                                        menu2.close()                                    end)                        end                    end, function(data, menu)                        menu.close()                    end)        else            -- buy room            table.insert(elements , { label = 'Pay a room ($' .. Config.Zones.price..') / day' , value = 'pay_rent_room'})            ESX.UI.Menu.Open( 'default' , GetCurrentResourceName() , 'Rental',                {                    title = 'Rental Menu',                    align = 'right',                    elements = elements                }, function(data, menu)                    if data.current.value == 'pay_rent_room' then                        ESX.UI.Menu.CloseAll()                        TriggerServerEvent('ons_rental_room:payrent')                        menu.close()                    end                end , function(data, menu)                        menu.close()                end)        end    end, identifier)endfunction OpenPropertyInventoryMenu(owner)    ESX.TriggerServerCallback(            "ons_rental_room:getRentalInventory",            function(inventory)                TriggerEvent("esx_inventoryhud:openRentalInventory", inventory)            end,            owner    )end